-- Miranda Hub - Tycoon auto-teleport a base cuando aparece objeto robado
-- Para "Roba un brainrot" (Tycoon)
-- senkooooo666

local plr = game.Players.LocalPlayer
local base = nil

-- Buscar tu base en workspace.Bases.[TuNombre]
if workspace:FindFirstChild("Bases") and workspace.Bases:FindFirstChild(plr.Name) then
    base = workspace.Bases[plr.Name]
else
    game.StarterGui:SetCore("SendNotification", {
        Title = "Miranda Hub",
        Text = "No se encontró tu base.",
        Duration = 3
    })
    return
end

-- Detectar aparición de objetos nuevos en la base
local knownChildren = {}
for _,obj in pairs(base:GetChildren()) do
    table.insert(knownChildren, obj)
end

base.ChildAdded:Connect(function(obj)
    -- Si el objeto nuevo NO está en la lista inicial, es robado o generado
    local nuevo = true
    for _,v in pairs(knownChildren) do
        if v == obj then
            nuevo = false
            break
        end
    end
    if nuevo then
        -- Teletransporta al jugador a la base (al centro de la base)
        local destino = nil
        if base:FindFirstChild("BasePart") then
            destino = base.BasePart
        elseif base:FindFirstChildWhichIsA("Part") then
            destino = base:FindFirstChildWhichIsA("Part")
        else
            destino = obj -- Si el objeto mismo es un Part
        end

        if destino then
            plr.Character.HumanoidRootPart.CFrame = destino.CFrame + Vector3.new(0,5,0)
            game.StarterGui:SetCore("SendNotification", {
                Title = "Miranda Hub",
                Text = "¡Teletransportado a tu base tras robo exitoso!",
                Duration = 3
            })
        end
    end
end)
